<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-cYx6xvKkyIj1lxkVcxAcUf2/rBJs/rYBiRQ2p9Cao0QzqlhHKI2+qDeIwlQSBPfzg47+Uz+kL5J3jnF//qvf0Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style type="text/css">
        html, body { height: 100%; margin: 0; padding: 0; }
        #map_canvas { height: 100%; background-color: #666970; position: relative; }
        #maximize_button { position: absolute; top: 10px; right: 10px; z-index: 1; background: #fff; padding: 5px; border-radius: 5px; }
    </style>
    <!-- Include the API key in the script source URL -->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyBy784gK1NlXXRq1uUMnBMqape7Q6w_vmY&sensor=false"></script>
    <script type="text/javascript">
        let map;
        let marker;

        function initialize() {
            var latlng = new google.maps.LatLng(36.806496, 10.181532);
            var myOptions = {
                zoom: 14,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                mapTypeControl: false,
                navigationControl: false,
                streetViewControl: false,
                backgroundColor: "#666970"
            };

            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            map.addListener('click', function(event) {
                // Clear previous marker, if any
                if (marker) {
                    marker.setMap(null);
                }
                // Create a new marker at the clicked position
                marker = new google.maps.Marker({
                    position: event.latLng,
                    map: map
                });
                // Set the location in JavaFX controller
                javaApp.setLocation(event.latLng.lat() + "," + event.latLng.lng());
            });
        }

        // Function to toggle full screen mode
        function toggleFullScreen() {
            var elem = document.getElementById("map_canvas");
            if (!document.fullscreenElement &&    // alternative standard method
                !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {  // current working methods
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.msRequestFullscreen) {
                    elem.msRequestFullscreen();
                } else if (elem.mozRequestFullScreen) {
                    elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullscreen) {
                    elem.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                }
            }
        }

        // Call initialize function when window is loaded
        window.onload = initialize;
    </script>
</head>
<body>
<div id="map_canvas" style="width:100%; height:100%">
    <!-- Maximize Button -->
    <button id="maximize_button" onclick="toggleFullScreen()"><i class="fas fa-expand"></i></button>
</div>
</body>
</html>